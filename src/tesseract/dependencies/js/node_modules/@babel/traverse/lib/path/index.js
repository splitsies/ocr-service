Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.SHOULD_STOP=exports.SHOULD_SKIP=exports.REMOVED=void 0;var virtualTypes=require("./lib/virtual-types"),_debug=require("debug"),_index=require("../index"),_scope=require("../scope"),_t=require("@babel/types"),t=_t,_cache=require("../cache"),_generator=require("@babel/generator"),NodePath_ancestry=require("./ancestry"),NodePath_inference=require("./inference"),NodePath_replacement=require("./replacement"),NodePath_evaluation=require("./evaluation"),NodePath_conversion=require("./conversion"),NodePath_introspection=require("./introspection"),NodePath_context=require("./context"),NodePath_removal=require("./removal"),NodePath_modification=require("./modification"),NodePath_family=require("./family"),NodePath_comments=require("./comments"),NodePath_virtual_types_validator=require("./lib/virtual-types-validator");const{validate:validate}=_t,debug=_debug("babel"),REMOVED=1;exports.REMOVED=REMOVED;const SHOULD_STOP=2;exports.SHOULD_STOP=SHOULD_STOP;const SHOULD_SKIP=4;exports.SHOULD_SKIP=SHOULD_SKIP;class NodePath{constructor(hub,parent){this.contexts=[],this.state=null,this.opts=null,this._traverseFlags=0,this.skipKeys=null,this.parentPath=null,this.container=null,this.listKey=null,this.key=null,this.node=null,this.type=null,this.parent=parent,this.hub=hub,this.data=null,this.context=null,this.scope=null}static get({hub:hub,parentPath:parentPath,parent:parent,container:container,listKey:listKey,key:key}){if(!hub&&parentPath&&(hub=parentPath.hub),!parent)throw new Error("To get a node path the parent needs to exist");const targetNode=container[key];let paths=_cache.path.get(parent);paths||(paths=new Map,_cache.path.set(parent,paths));let path=paths.get(targetNode);return path||(path=new NodePath(hub,parent),targetNode&&paths.set(targetNode,path)),path.setup(parentPath,container,listKey,key),path}getScope(scope){return this.isScope()?new _scope.default(this):scope}setData(key,val){return null==this.data&&(this.data=Object.create(null)),this.data[key]=val}getData(key,def){null==this.data&&(this.data=Object.create(null));let val=this.data[key];return void 0===val&&void 0!==def&&(val=this.data[key]=def),val}hasNode(){return null!=this.node}buildCodeFrameError(msg,Error=SyntaxError){return this.hub.buildError(this.node,msg,Error)}traverse(visitor,state){(0,_index.default)(this.node,visitor,this.scope,state,this)}set(key,node){validate(this.node,key,node),this.node[key]=node}getPathLocation(){const parts=[];let path=this;do{let key=path.key;path.inList&&(key=`${path.listKey}[${key}]`),parts.unshift(key)}while(path=path.parentPath);return parts.join(".")}debug(message){debug.enabled&&debug(`${this.getPathLocation()} ${this.type}: ${message}`)}toString(){return(0,_generator.default)(this.node).code}get inList(){return!!this.listKey}set inList(inList){inList||(this.listKey=null)}get parentKey(){return this.listKey||this.key}get shouldSkip(){return!!(this._traverseFlags&SHOULD_SKIP)}set shouldSkip(v){v?this._traverseFlags|=SHOULD_SKIP:this._traverseFlags&=~SHOULD_SKIP}get shouldStop(){return!!(this._traverseFlags&SHOULD_STOP)}set shouldStop(v){v?this._traverseFlags|=SHOULD_STOP:this._traverseFlags&=~SHOULD_STOP}get removed(){return!!(this._traverseFlags&REMOVED)}set removed(v){v?this._traverseFlags|=REMOVED:this._traverseFlags&=~REMOVED}}Object.assign(NodePath.prototype,NodePath_ancestry,NodePath_inference,NodePath_replacement,NodePath_evaluation,NodePath_conversion,NodePath_introspection,NodePath_context,NodePath_removal,NodePath_modification,NodePath_family,NodePath_comments),NodePath.prototype._guessExecutionStatusRelativeToDifferentFunctions=NodePath_introspection._guessExecutionStatusRelativeTo;for(const type of t.TYPES){const typeKey=`is${type}`,fn=t[typeKey];NodePath.prototype[typeKey]=function(opts){return fn(this.node,opts)},NodePath.prototype[`assert${type}`]=function(opts){if(!fn(this.node,opts))throw new TypeError(`Expected node path of type ${type}`)}}Object.assign(NodePath.prototype,NodePath_virtual_types_validator);for(const type of Object.keys(virtualTypes))"_"!==type[0]&&(t.TYPES.includes(type)||t.TYPES.push(type));var _default=NodePath;exports.default=_default;