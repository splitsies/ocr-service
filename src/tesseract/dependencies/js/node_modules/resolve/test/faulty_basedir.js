var test=require("tape"),path=require("path"),resolve=require("../");test("faulty basedir must produce error in windows",{skip:"win32"!==process.platform},(function(t){t.plan(1),resolve("tape/lib/test.js",{basedir:"C:\\a\\b\\c\\d"},(function(err,res,pkg){t.equal(!!err,!0)}))})),test("non-existent basedir should not throw when preserveSymlinks is false",(function(t){t.plan(2);var opts={basedir:path.join(path.sep,"unreal","path","that","does","not","exist"),preserveSymlinks:!1};resolve("./dotdot/abc",opts,(function(err,res){t.equal(err.code,"MODULE_NOT_FOUND"),t.equal(res,void 0)}))}));