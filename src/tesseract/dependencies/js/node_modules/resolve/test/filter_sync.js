var path=require("path"),test=require("tape"),resolve=require("../");test("filter",(function(t){var packageFilterArgs,dir=path.join(__dirname,"resolver"),res=resolve.sync("./baz",{basedir:dir,packageFilter:function(pkg,dir){return pkg.main="doom",packageFilterArgs=[pkg,dir],pkg}});t.equal(res,path.join(dir,"baz/doom.js"),'changing the package "main" works');var packageData=packageFilterArgs[0];t.equal(packageData.main,"doom",'package "main" was altered');var packageDir=packageFilterArgs[1];t.equal(packageDir,path.join(dir,"baz"),'second packageFilter argument is "dir"'),t.end()}));