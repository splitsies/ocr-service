module.exports=function(ast,comments,tokens){if(comments.length){var firstComment=comments[0],lastComment=comments[comments.length-1];if(tokens.length){if(firstComment.start<tokens[0].start){var token=tokens[0];if(ast.body.length){var node=ast.body[0];node.leadingComments=[];for(var firstTokenStart=token.start,len=comments.length,i=0;i<len&&comments[i].start<firstTokenStart;i++)node.leadingComments.push(comments[i])}}}else ast.start=lastComment.end,ast.loc.start.line=lastComment.loc.end.line,ast.loc.start.column=lastComment.loc.end.column,null===ast.leadingComments&&ast.innerComments.length&&(ast.leadingComments=ast.innerComments);if(tokens.length){var lastToken=tokens[tokens.length-1];lastComment.end>lastToken.end&&(ast.range[1]=lastToken.end,ast.loc.end.line=lastToken.loc.end.line,ast.loc.end.column=lastToken.loc.end.column)}}else tokens.length||(ast.loc.start.line=1,ast.loc.end.line=1);ast.body&&ast.body.length>0&&(ast.loc.start.line=ast.body[0].loc.start.line,ast.range[0]=ast.body[0].start)};