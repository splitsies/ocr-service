var t=require("@babel/types"),convertComments=require("./convertComments");module.exports=function(ast,traverse,code){var state={source:code};t.VISITOR_KEYS.Property=t.VISITOR_KEYS.ObjectProperty,t.VISITOR_KEYS.MethodDefinition=["key","value","decorators","returnType","typeParameters"],traverse(ast,astTransformVisitor,null,state),delete t.VISITOR_KEYS.Property,delete t.VISITOR_KEYS.MethodDefinition};var astTransformVisitor={noScope:!0,enter(path){var node=path.node;node._babelType=node.type,node.innerComments&&(node.trailingComments=node.innerComments,delete node.innerComments),node.trailingComments&&convertComments(node.trailingComments),node.leadingComments&&convertComments(node.leadingComments)},exit(path){var node=path.node;if(path.isJSXText()&&(node.type="Literal"),path.isRestElement()&&path.parent&&"ObjectPattern"===path.parent.type&&(node.type="ExperimentalRestProperty"),path.isSpreadElement()&&path.parent&&"ObjectExpression"===path.parent.type&&(node.type="ExperimentalSpreadProperty"),path.isTypeParameter()&&(node.type="Identifier",node.typeAnnotation=node.bound,delete node.bound),path.isQualifiedTypeIdentifier()&&delete node.id,path.isObjectTypeProperty()&&delete node.key,path.isObjectTypeIndexer()&&delete node.id,path.isFunctionTypeParam()&&delete node.name,path.isImportDeclaration()&&delete node.isType,path.isTemplateLiteral())for(var j=0;j<node.quasis.length;j++){var q=node.quasis[j];q.range[0]-=1,q.tail?q.range[1]+=1:q.range[1]+=2,q.loc.start.column-=1,q.tail?q.loc.end.column+=1:q.loc.end.column+=2}}};